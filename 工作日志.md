## 颜色统一
1. D:\project\fancyqube\thd_app\templates\stocking_demand\stocking_demand_add_plugin.html
添加备货需求，SKU添加备货需求的按钮颜色进行了修改
总重量的显示（红色）
2. 查询按钮   D:\project\fancyqube\skuapp\templates\search_box_plugin.html
3.radio 样式单选按钮的颜色进行了修改  D:\project\fancyqube\usr\local\python3\lib\python3.6\site-packages\xadmin\vendor\bootstrip_radio_checkbox\css\awesome-bootstrap-checkbox.css
4.7日销量... 颜色修改D:\project\fancyqube\allplatform_app\templates\sort_item_plugin_thirdplatform.html
5.D:\project\fancyqube\allplatform_app\modelsadminx\t_tp_demand_suggest_Admin.py 中自定义警告的颜色color：red修改  ‘一键备货’‘提醒运营员备货’蓝色的修改 增加悬浮样式'onmouseover': "this.style.backgroundColor='#337ab7'; this.style.borderColor='#2e6da4'",  ## 悬浮样式
6.D:\project\fancyqube\thd_app\templates\t_tp_demand_suggest_show_actions.html  中修改了‘转暂停备货’‘转停止备货’的按钮颜色 中还有转建议备货
7.D:\project\fancyqube\aliapp\templates\Async_list_display.html 表头字段颜色修改
8.D:\project\fancyqube\thd_app\modelsadminx\v_tp_platform_fnsku_info_Admin.py   SKU图片和星级颜色修改
9.D:\project\fancyqube\thd_app\modelsadminx\t_thd_stocking_demand_Admin.py   编辑按钮颜色
10.D:\project\fancyqube\thd_app\modelsadminx\v_tp_stocking_demand_Admin.py ，D:\project\fancyqube\thd_app\modelsadminx\v_tp_stocking_demand_quick_Admin.py备货详情颜色
11.D:\project\fancyqube\thd_app\modelsadminx\v_tp_stocking_demand_Admin.py 路径下提交审核，驳回等四个按钮悬停的时候的背景颜色
12.D:\project\fancyqube\thd_app\modelsadminx\t_thd_stocking_demand_Admin.py  废弃原因/填写废弃原因的颜色
<!-- 13.D:\project\fancyqube\skuapp\templates\t_research_development_management\research_development_management_Plugin.html 针对性对第一个导航栏的颜色进行修改
D:\project\fancyqube\thd_app\templates\stocking_demand\left_nav_tree_tab.html 其余导航栏的修改
14.D:\project\fancyqube\aliapp\templates\Async_list_display.html 操作栏颜色修改 -->
13.D:\project\fancyqube\thd_app\modelsadminx\t_thd_stocking_demand_Admin.py 备发货系统备注颜色


## 从头干需求
一.TP海外仓备货
1.TP海外仓备货意见
    查询按钮     D:\project\fancyqube\skuapp\templates\search_box_plugin.html
    ‘一键备货’‘提醒运营员备货’;所有的red警告;         D:\project\fancyqube\allplatform_app\modelsadminx\t_tp_demand_suggest_Admin.py
    ‘转暂停备货’‘转停止备货’           D:\project\fancyqube\thd_app\templates\t_tp_demand_suggest_show_actions.html
    7日销量... 颜色修改             D:\project\fancyqube\allplatform_app\templates\sort_item_plugin_thirdplatform.html
    菜单的字段修改                  D:\project\fancyqube\thd_app\templates\stocking_demand\left_nav_tree_tab.html
    表头字段颜色修改，页面选择的字体颜色                D:\project\fancyqube\aliapp\templates\Async_list_display.html 

2.
表头：SKU图片和星级   D:\project\fancyqube\thd_app\modelsadminx\v_tp_platform_sku_info_Admin.py
销售计划

3.备货需求
    添加备货需求，SKU添加备货需求的按钮颜色进行了修改   D:\project\fancyqube\thd_app\templates\stocking_demand\stocking_demand_add_plugin.html
    废弃原因 编辑按钮  D:\project\fancyqube\thd_app\modelsadminx\t_thd_stocking_demand_Admin.py

4.统筹备货
    销售计划，备货详情，提交审核，驳回等四个按钮  D:\project\fancyqube\thd_app\modelsadminx\v_tp_stocking_demand_Admin.py 统一成蓝底白字
    
### 统一样式
重新创建css，然后再样式中引用新的样式
一.调研开发任务管理系统
    针对性对第一个导航栏的字体颜色进行修改（背景样式需要自己添加）  D:\project\fancyqube\skuapp\templates\t_research_development_management\research_development_management_Plugin.html  
    查询按钮 D:\project\fancyqube\skuapp\templates\search_box_plugin.html
    调研开发任务统计页面 D:\project\fancyqube\skuapp\templates\t_research_development_management\search_bottom.html

二.TP海外仓备货 
1.TP海外仓备货意见
    ‘一键备货’‘提醒运营员备货’;所有的red警告;         D:\project\fancyqube\allplatform_app\modelsadminx\t_tp_demand_suggest_Admin.py
    表头字段颜色修改;页面选择的字体颜色;下一页/上一页字体颜色                D:\project\fancyqube\aliapp\templates\Async_list_display.html
    ‘转暂停备货’‘转停止备货’           D:\project\fancyqube\thd_app\templates\t_tp_demand_suggest_show_actions.html

2.虚拟中转仓SKU信息
    表头：SKU图片和星级;按钮：销售计划   D:\project\fancyqube\thd_app\modelsadminx\v_tp_platform_sku_info_Admin.py

3.备货需求
    添加备货需求，SKU添加备货需求的按钮颜色进行了修改   D:\project\fancyqube\thd_app\templates\stocking_demand\stocking_demand_add_plugin.html
    废弃原因 编辑按钮 备发货系统备注字样  D:\project\fancyqube\thd_app\modelsadminx\t_thd_stocking_demand_Admin.py

4.统筹备货
    备货详情字样;销售计划，备货详情，提交审核，驳回等四个按钮  D:\project\fancyqube\thd_app\modelsadminx\v_tp_stocking_demand_Admin.py 统一成蓝底白字


## R2025080965290增加产品工程师维度

## R2025040860285交期延误信息


## 增加百分比修改sql
海外仓服务商统计
SELECT 
    platform AS e_warehouse_platform,
    CONCAT(cg_sum, ' (', ROUND(cg_sum * 100.0 / stock_sum_amount, 0), '%)') AS f_inventory_amount_procurement,
    CONCAT(jhc_sum, ' (', ROUND(jhc_sum * 100.0 / stock_sum_amount, 0), '%)') AS f_jh_inventory,
    CONCAT(fhz_sum, ' (', ROUND(fhz_sum * 100.0 / stock_sum_amount, 0), '%)') AS f_stock_sending_amount,
    CONCAT(shipped_receiving_sum, ' (', ROUND(shipped_receiving_sum * 100.0 / stock_sum_amount, 0), '%)') AS f_in_transit_amount,
    CONCAT(inventory_sum, ' (', ROUND(inventory_sum * 100.0 / stock_sum_amount, 0), '%)') AS f_onstock_money
FROM (
    SELECT 
        platform,
        SUM(cg_shipped_inventory) AS cg_sum,
        SUM(jhc_inventory) AS jhc_sum,
        SUM(fhz_inventory) AS fhz_sum,
        SUM(shipped_receiving_price) AS shipped_receiving_sum,
        SUM(inventory_amount) AS inventory_sum
    FROM hq_db.t_fba_light_small_inventory_report
    WHERE platform IN ('FBA', 'WFS') 
    AND backup_date = '2025-08-24'
    GROUP BY platform
) AS platform_sums,
(
    SELECT SUM(expected_inventory_amount) as stock_sum_amount 
    FROM hq_db.t_fba_light_small_inventory_report 
    WHERE platform = 'ALL'
    AND backup_date = '2025-08-24'
) AS stock_sums; 
轻小件销量类型库存金额统计
SELECT 
    backup_date as dt_static_date, 
    IF(count(DISTINCT b.VDesc)>1, '预计库存金额', b.VDesc) as e_light_small_inventory, 
    platform as e_warehouse_platform, 
    CONCAT(round(SUM(IF(sales_type='0',total_goods_cost,0))), ' (', ROUND(SUM(IF(sales_type='0',total_goods_cost,0)) * 100.0 / denominator_amount, 0), '%)') as f_zero_sales_amount,  
    CONCAT(round(SUM(IF(sales_type='1',total_goods_cost,0))), ' (', ROUND(SUM(IF(sales_type='1',total_goods_cost,0)) * 100.0 / denominator_amount, 0), '%)') as f_scattered_sales_amount,  
    CONCAT(round(SUM(IF(sales_type='2',total_goods_cost,0))), ' (', ROUND(SUM(IF(sales_type='2',total_goods_cost,0)) * 100.0 / denominator_amount, 0), '%)') as f_low_sales_amount,  
    CONCAT(round(SUM(IF(sales_type='3',total_goods_cost,0))), ' (', ROUND(SUM(IF(sales_type='3',total_goods_cost,0)) * 100.0 / denominator_amount, 0), '%)') as f_mid_sales_amount,  
    CONCAT(round(SUM(IF(sales_type='4',total_goods_cost,0))), ' (', ROUND(SUM(IF(sales_type='4',total_goods_cost,0)) * 100.0 / denominator_amount, 0), '%)') as f_high_sales_amount,  
    CONCAT(round(SUM(IF(sales_type='5',total_goods_cost,0))), ' (', ROUND(SUM(IF(sales_type='5',total_goods_cost,0)) * 100.0 / denominator_amount, 0), '%)') as f_hot_selling_amount 
FROM hq_db.t_fba_light_small_inventory_detail a 
LEFT JOIN hq_db.t_sys_param b on b.Type='9400214' and a.static_type=b.V 
CROSS JOIN (
    SELECT 
        CASE 
            WHEN static_type = 1 THEN SUM(cg_shipped_inventory)
            WHEN static_type = 2 THEN SUM(jhc_inventory)
            WHEN static_type = 3 THEN SUM(fhz_inventory)
            WHEN static_type = 4 THEN SUM(shipped_receiving_price)
            WHEN static_type = 5 THEN SUM(inventory_amount)
        END AS denominator_amount
    FROM hq_db.t_fba_light_small_inventory_report
    WHERE backup_date=%s 
    AND platform IN ('FBA', 'WFS')
) AS inventory_totals
where backup_date='dt_static_date' 
and static_type in (e_light_small_inventory)
GROUP BY platform;


SELECT 
    a.backup_date AS dt_static_date, 
    IF(COUNT(DISTINCT b.VDesc) > 1, '预计库存金额', b.VDesc) AS e_light_small_inventory, 
    a.platform AS e_warehouse_platform, 

    CONCAT(ROUND(SUM(IF(a.sales_type='0', a.total_goods_cost, 0))), ' (',
           ROUND(SUM(IF(a.sales_type='0', a.total_goods_cost, 0)) * 100.0 / NULLIF(d.denominator_amount,0), 0), '%)') AS f_zero_sales_amount,

    CONCAT(ROUND(SUM(IF(a.sales_type='1', a.total_goods_cost, 0))), ' (',
           ROUND(SUM(IF(a.sales_type='1', a.total_goods_cost, 0)) * 100.0 / NULLIF(d.denominator_amount,0), 0), '%)') AS f_scattered_sales_amount,

    CONCAT(ROUND(SUM(IF(a.sales_type='2', a.total_goods_cost, 0))), ' (',
           ROUND(SUM(IF(a.sales_type='2', a.total_goods_cost, 0)) * 100.0 / NULLIF(d.denominator_amount,0), 0), '%)') AS f_low_sales_amount,

    CONCAT(ROUND(SUM(IF(a.sales_type='3', a.total_goods_cost, 0))), ' (',
           ROUND(SUM(IF(a.sales_type='3', a.total_goods_cost, 0)) * 100.0 / NULLIF(d.denominator_amount,0), 0), '%)') AS f_mid_sales_amount,

    CONCAT(ROUND(SUM(IF(a.sales_type='4', a.total_goods_cost, 0))), ' (',
           ROUND(SUM(IF(a.sales_type='4', a.total_goods_cost, 0)) * 100.0 / NULLIF(d.denominator_amount,0), 0), '%)') AS f_high_sales_amount,

    CONCAT(ROUND(SUM(IF(a.sales_type='5', a.total_goods_cost, 0))), ' (',
           ROUND(SUM(IF(a.sales_type='5', a.total_goods_cost, 0)) * 100.0 / NULLIF(d.denominator_amount,0), 0), '%)') AS f_hot_selling_amount

FROM hq_db.t_fba_light_small_inventory_detail a
LEFT JOIN hq_db.t_sys_param b 
       ON b.Type='9400214' AND a.static_type=b.V
CROSS JOIN (
    SELECT 
        SUM(CASE
            WHEN e_light_small_inventory = 1 THEN cg_shipped_inventory
            WHEN e_light_small_inventory = 2 THEN jhc_inventory
            WHEN e_light_small_inventory = 3 THEN fhz_inventory
            WHEN e_light_small_inventory = 4 THEN shipped_receiving_price
            WHEN e_light_small_inventory = 5 THEN inventory_amount
        END) AS denominator_amount
    FROM hq_db.t_fba_light_small_inventory_report
    WHERE backup_date='dt_static_date'
      AND platform IN ('FBA','WFS')
) d
WHERE a.backup_date='dt_static_date'
  AND a.static_type IN (e_light_small_inventory)
GROUP BY a.platform;